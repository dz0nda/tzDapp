(this.webpackJsonpdapp=this.webpackJsonpdapp||[]).push([[0],{324:function(e,t){},326:function(e,t){},385:function(e,t){},387:function(e,t){},398:function(e,t){},400:function(e,t){},429:function(e,t){},438:function(e,t){},458:function(e,t){},459:function(e,t){},538:function(e,t){},540:function(e,t){},541:function(e,t){},546:function(e,t){},548:function(e,t){},561:function(e,t){},573:function(e,t){},576:function(e,t){},581:function(e,t){},589:function(e,t){},663:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(23),s=n.n(r),i=n(713),o=n(19),l=n.n(o),u=n(35),j=n(27),d=n(283),b=n(92),f=Object(d.a)((function(e){var t=e.appName,n=c.a.useState((function(){return{wallet:null,tezos:null,accountPkh:null}})),a=Object(j.a)(n,2),r=a[0],s=r.wallet,i=r.tezos,o=r.accountPkh,d=a[1],f=Boolean(i);c.a.useEffect((function(){return b.a.onAvailabilityChange(function(){var e=Object(u.a)(l.a.mark((function e(n){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=25;break}return e.prev=1,e.next=4,b.a.getCurrentPermission();case 4:a=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:if(c=new b.a(t,a),e.t1=d,e.t2=c,e.t3=c.connected?c.toTezos():null,!c.connected){e.next=19;break}return e.next=16,c.getPKH();case 16:e.t4=e.sent,e.next=20;break;case 19:e.t4=null;case 20:e.t5=e.t4,e.t6={wallet:e.t2,tezos:e.t3,accountPkh:e.t5},(0,e.t1)(e.t6),e.next=26;break;case 25:d({wallet:null,tezos:null,accountPkh:null});case 26:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}())}),[t,d]),c.a.useEffect((function(){if(s&&s.connected)return b.a.onPermissionChange((function(e){e||d({wallet:new b.a(t),tezos:null,accountPkh:null})}))}),[s,t,d]);var h=c.a.useCallback(function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s){e.next=3;break}throw new Error("Thanos Wallet not available");case 3:return e.next=5,s.connect(t,n);case 5:return a=s.toTezos(),e.next=8,a.wallet.pkh();case 8:c=e.sent,d({wallet:s,tezos:a,accountPkh:c}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert("Failed to connect TempleWallet: ".concat(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),[d,s]);return{wallet:s,tezos:i,accountPkh:o,ready:f,connect:h}}),(function(e){return e.wallet}),(function(e){return e.tezos}),(function(e){return e.accountPkh}),(function(e){return e.ready}),(function(e){return e.connect})),h=Object(j.a)(f,6),x=h[0],O=(h[1],h[2]),p=h[3],m=(h[4],h[5]);function v(e,t){var n=c.a.useRef();c.a.useEffect((function(){if(e){var a;return function c(){(a=e.stream.subscribe("head")).on("data",(function(e){n.current&&n.current!==e&&t(e),n.current=e})),a.on("error",(function(e){a.close(),c()}))}(),function(){return a.close()}}}),[e,t])}var g="KT1Dz2Q2rtxNxfKNmeSdajeikM4gU5oTSh8B",k=n(700),w=n(701),y=n(702),C=n(703),N=n(288),S=n.n(N),T=n(697),z=n(2),P=function(e){return Object(z.jsx)(T.a,{color:"inherit",onClick:e.onClick,children:"Connect"})},R=function(){var e=m(),t=c.a.useCallback(Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e("granadanet",{forcePermission:!0});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error(t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])}))),[e]);return Object(z.jsx)(P,{onClick:t})},G=n(715),D=n(105),I=Object(k.a)({root:{flexGrow:1}}),B=function(e){var t=I();return Object(z.jsxs)(G.a,{className:t.root,children:[Object(z.jsxs)(D.a,{variant:"subtitle1",children:["Address: ",e.address]}),Object(z.jsxs)(D.a,{variant:"subtitle1",children:["Balance: ",e.balance," tez"]})]})},E=function(){m();var e=p(),t=O(),n=c.a.useState(""),a=Object(j.a)(n,2),r=a[0],s=a[1],i=c.a.useMemo((function(){if(e){console.log("account",e);var t=e,n=t.length;return"".concat(t.slice(0,7),"...").concat(t.slice(n-4,n))}return""}),[e]),o=c.a.useCallback(Object(u.a)(l.a.mark((function n(){var a,c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=6;break}return a=t,n.next=4,a.tz.getBalance(e);case 4:c=n.sent,s(a.format("mutez","tz",c).toString());case 6:case"end":return n.stop()}}),n)}))),[t,e,s]);return c.a.useEffect((function(){o()}),[o]),v(t,o),Object(z.jsx)(B,{address:i,balance:r})},H=Object(k.a)((function(e){return{headerRoot:{flexGrow:1,height:"10vh"},homeButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),A=function(){var e=H();return Object(z.jsx)("div",{className:e.headerRoot,children:Object(z.jsx)(w.a,{position:"static",children:Object(z.jsxs)(y.a,{children:[Object(z.jsx)(C.a,{edge:"start",className:e.homeButton,color:"inherit","aria-label":"home",children:Object(z.jsx)(S.a,{})}),Object(z.jsx)(E,{}),Object(z.jsx)(R,{})]})})})},F=n(129),V=n(25),W=n(708),M=n(709),K=n(704),L=n(705),J=n(706),Q=n(707),Y=Object(k.a)((function(e){return{card:{},cardHeader:{backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[700]},cardPricing:{display:"flex",justifyContent:"center",alignItems:"baseline",marginBottom:e.spacing(2)},cardActions:{flexGrow:1},link:{flexGrow:1,textDecoration:"none"}}})),_=function(e){var t=Y();return Object(z.jsxs)(K.a,{className:t.card,children:[Object(z.jsx)(L.a,{title:e.title,titleTypographyProps:{align:"center"},className:t.cardHeader}),Object(z.jsxs)(J.a,{children:[Object(z.jsx)("div",{className:t.cardPricing,children:Object(z.jsxs)(D.a,{variant:"h6",color:"textSecondary",children:["Description: ",e.description]})}),Object(z.jsxs)(D.a,{variant:"subtitle1",align:"center",children:["Addess Contract: ",e.address]})]}),Object(z.jsx)(Q.a,{className:t.cardActions,children:Object(z.jsx)(F.b,{className:t.link,to:"/".concat(e.link),children:Object(z.jsx)(T.a,{fullWidth:!0,variant:"contained",color:"primary",children:"Go to DApp"})})})]})},q=Object(k.a)({homeRoot:{flex:1,height:"75vh"},homeGrid:{height:"100%"}}),U=function(){var e=q();return Object(z.jsx)(W.a,{className:e.homeRoot,children:Object(z.jsxs)(M.a,{className:e.homeGrid,container:!0,alignItems:"center",justifyContent:"space-evenly",children:[Object(z.jsx)(M.a,{item:!0,xs:3,children:Object(z.jsx)(_,{title:"Raffle",description:"",address:"",link:"raffle"})}),Object(z.jsx)(M.a,{item:!0,xs:3,children:Object(z.jsx)(_,{title:"Counter",description:"",address:"",link:"counter"})})]})})},X=n(296),Z=n(710),$=Object(k.a)({root:{minWidth:275},title:{fontSize:14},pos:{marginBottom:12}}),ee=function(e){var t=e.storage,n=e.tickets,a=$();return Object(z.jsxs)(K.a,{className:a.root,children:[Object(z.jsx)(L.a,{title:"Current raffle"}),Object(z.jsx)(Z.a,{variant:"middle"}),Object(z.jsxs)(J.a,{children:[Object(z.jsxs)(D.a,{className:a.title,color:"textSecondary",gutterBottom:!0,children:["Administrator: ",t?t.admin.toString():""]}),Object(z.jsxs)(D.a,{variant:"h5",component:"h2",children:["Reward: ",t?t.jackpot.toString():""]}),Object(z.jsxs)(D.a,{className:a.pos,color:"textSecondary",children:["Description: ",t?t.description.toString():""]}),Object(z.jsxs)(D.a,{className:a.pos,color:"textSecondary",children:["Closing date: ",t?t.close_date.toString():""]}),Object(z.jsxs)(D.a,{variant:"body2",component:"p",children:["Players:",Object(z.jsx)("div",{children:t?t.players.map((function(e,t){return Object(z.jsx)("li",{children:e},t)})):""})]}),Object(z.jsxs)(D.a,{variant:"body2",component:"p",children:["Ticket Sold:",Object(z.jsx)("div",{children:n.map((function(e,t){return Object(z.jsxs)("li",{children:[e[0]," : ",e[1]]},t)}))})]})]}),Object(z.jsx)(Q.a,{children:Object(z.jsx)(T.a,{size:"small",onClick:e.buyTicket,children:"Buy Ticket"})})]})},te=function(){var e=O(),t=Object(a.useState)(),n=Object(j.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(),o=Object(j.a)(i,2),d=o[0],b=o[1],f=Object(a.useState)([]),h=Object(j.a)(f,2),x=h[0],p=h[1];c.a.useEffect((function(){Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,e.wallet.at(g);case 3:n=t.sent,s(n);case 5:case"end":return t.stop()}}),t)})))()}),[e]);var m=c.a.useCallback(Object(u.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=11;break}return e.next=3,r.storage();case 3:return t=e.sent,console.log(t),n=Array.from(Array(t.players.length).keys()),e.next=8,t.sold_tickets.getMultipleValues(n);case 8:a=e.sent,b(t),p(Object(X.a)(a.valueMap));case 11:case"end":return e.stop()}}),e)}))),[r]);c.a.useEffect((function(){m()}),[m]),v(e,m);var k=c.a.useCallback((function(){return r.methods.buyTicket("unit").send({amount:1})}),[r]);return Object(z.jsx)(ee,{storage:d,tickets:x,buyTicket:k})},ne=n(290),ae=n.n(ne),ce=n(714),re=Object(k.a)({root:{},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),se=function(e){var t=re();return Object(z.jsxs)(K.a,{className:t.root,children:[Object(z.jsx)(L.a,{title:"Launch raffle"}),Object(z.jsx)(Z.a,{variant:"middle"}),Object(z.jsxs)(J.a,{children:[Object(z.jsx)("div",{children:Object(z.jsx)(ce.a,{id:"standard-basic",label:"Reward",onChange:function(t){return e.setReward(t.target.value)}})}),Object(z.jsx)("div",{children:Object(z.jsx)(ce.a,{id:"standard-basic",label:"Description",onChange:function(t){return e.setDescription(t.target.value)}})}),Object(z.jsx)("div",{children:Object(z.jsx)(ce.a,{id:"standard-basic",label:"Closing Date",onChange:function(t){return e.setNewDate(t.target.value)}})}),Object(z.jsx)("div",{children:Object(z.jsx)(ce.a,{id:"standard-basic",label:"Winning Ticket Hash",onChange:function(t){return e.setwinningTicketHash(t.target.value)},value:e.winningTicketHash})})]}),Object(z.jsx)(Q.a,{children:Object(z.jsx)(T.a,{size:"small",onClick:e.onClick,children:"Launch"})})]})},ie=function(){var e=O(),t=Object(a.useState)(void 0),n=Object(j.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)("100"),o=Object(j.a)(i,2),d=o[0],b=o[1],f=Object(a.useState)(""),h=Object(j.a)(f,2),x=h[0],p=h[1],m=Object(a.useState)(new Date),v=Object(j.a)(m,2),k=v[0],w=v[1],y=Object(a.useState)(""),C=Object(j.a)(y,2),N=C[0],S=C[1];c.a.useEffect((function(){Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,e.wallet.at(g);case 3:n=t.sent,s(n);case 5:case"end":return t.stop()}}),t)})))()}),[e]);var T=c.a.useCallback((function(e){var t=e.reward,n=e.description,a=e.closingDate,c=e.winningTicketHash;return r.methods.openRaffle(t,a,n,ae.a.utils.asciiToHex(c).slice(2)).send({amount:t})}),[r]);return Object(z.jsx)(se,{reward:d,description:x,closingDate:k,winningTicketHash:N,setReward:b,setDescription:p,setNewDate:function(e){e&&w(e)},setwinningTicketHash:S,onClick:function(){T({reward:parseInt(d),description:x,closingDate:k,winningTicketHash:N})}})},oe=Object(k.a)({raffleRoot:{flexGrow:1,height:"75vh"},raffleGrid:{height:"100%"}}),le=function(){var e=oe();return Object(z.jsx)(W.a,{className:e.raffleRoot,children:Object(z.jsxs)(M.a,{className:e.raffleGrid,container:!0,alignItems:"center",justifyContent:"space-evenly",children:[Object(z.jsx)(M.a,{item:!0,xs:4,children:Object(z.jsx)(te,{})}),Object(z.jsx)(M.a,{item:!0,xs:4,children:Object(z.jsx)(ie,{})})]})})},ue=n(295),je=n.n(ue),de=n(294),be=n.n(de),fe=Object(k.a)((function(e){return{counterInfoRoot:{flexGrow:1},countInfoGrid:{padding:e.spacing(3)}}})),he=function(e){var t=fe(),n=Object(a.useState)("1"),c=Object(j.a)(n,2),r=c[0],s=c[1];return Object(z.jsxs)(K.a,{className:t.counterInfoRoot,children:[Object(z.jsx)(L.a,{title:"Counter",titleTypographyProps:{align:"center"}}),Object(z.jsx)(Z.a,{variant:"middle"}),Object(z.jsxs)(J.a,{children:[Object(z.jsx)(M.a,{className:t.countInfoGrid,container:!0,justifyContent:"space-evenly",alignItems:"center",children:Object(z.jsx)(ce.a,{fullWidth:!0,label:"Enter a value to add or sub",value:r,onChange:function(e){return s(e.target.value)}})}),Object(z.jsxs)(M.a,{className:t.countInfoGrid,container:!0,justifyContent:"space-evenly",alignItems:"center",children:[Object(z.jsx)(M.a,{item:!0,children:Object(z.jsx)(C.a,{color:"primary",onClick:function(){return e.subValue(parseInt(r))},children:Object(z.jsx)(be.a,{})})}),Object(z.jsx)(M.a,{item:!0,children:Object(z.jsx)(D.a,{variant:"h3",children:e.storage})}),Object(z.jsx)(M.a,{item:!0,children:Object(z.jsx)(C.a,{color:"primary",onClick:function(){return e.addValue(parseInt(r))},children:Object(z.jsx)(je.a,{})})})]}),Object(z.jsx)(M.a,{className:t.countInfoGrid,container:!0,justifyContent:"space-evenly",alignItems:"center",children:Object(z.jsx)(T.a,{color:"primary",variant:"contained",onClick:function(){return e.resetValue()},children:"Reset"})})]})]})},xe=function(){var e=O(),t=Object(a.useState)(),n=Object(j.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(),o=Object(j.a)(i,2),d=o[0],b=o[1];c.a.useEffect((function(){Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,e.wallet.at("KT1KX1tDMH5Fc9oNFhYPRn82erCQki8JNZqx");case 3:n=t.sent,s(n);case 5:case"end":return t.stop()}}),t)})))()}),[e]);var f=c.a.useCallback(Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}return e.next=3,r.storage();case 3:t=e.sent,console.log(t),b(t.toString());case 6:case"end":return e.stop()}}),e)}))),[r]);c.a.useEffect((function(){f()}),[f]),v(e,f);var h=c.a.useCallback((function(e){return r.methods.increment(e).send()}),[r]),x=c.a.useCallback((function(e){return r.methods.decrement(e).send()}),[r]),p=c.a.useCallback((function(){return r.methods.reset("unit").send()}),[r]);return Object(z.jsx)(he,{storage:d,addValue:h,subValue:x,resetValue:p})},Oe=Object(k.a)({raffleRoot:{flexGrow:1,height:"75vh"},raffleGrid:{height:"100%"}}),pe=function(){var e=Oe();return Object(z.jsx)(W.a,{className:e.raffleRoot,children:Object(z.jsx)(M.a,{className:e.raffleGrid,container:!0,alignItems:"center",justifyContent:"space-evenly",children:Object(z.jsx)(M.a,{item:!0,xs:4,children:Object(z.jsx)(xe,{})})})})},me=function(){return Object(z.jsx)(F.a,{children:Object(z.jsxs)(V.c,{children:[Object(z.jsx)(V.a,{exact:!0,path:"/",children:Object(z.jsx)(U,{})}),Object(z.jsx)(V.a,{exact:!0,path:"/raffle",children:Object(z.jsx)(le,{})}),Object(z.jsx)(V.a,{exact:!0,path:"/counter",children:Object(z.jsx)(pe,{})})]})})},ve=n(712),ge=Object(k.a)((function(e){return{footer:{height:"10vh"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"}}})),ke=function(){var e=ge(),t=Object(z.jsx)("span",{className:e.bullet,children:"\u2022"});return Object(z.jsx)(W.a,{maxWidth:"md",component:"footer",className:e.footer,children:Object(z.jsx)(G.a,{mt:1,children:Object(z.jsxs)(D.a,{variant:"body2",color:"textSecondary",align:"center",children:[Object(z.jsx)(ve.a,{color:"inherit",href:"#",children:"dzonda"}),"",t,(new Date).getFullYear(),"."]})})})},we=function(){return Object(z.jsx)(x,{appName:"raffle",children:Object(z.jsxs)(c.a.Suspense,{fallback:null,children:[Object(z.jsx)(A,{}),Object(z.jsx)(me,{}),Object(z.jsx)(ke,{})]})})},ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,718)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(z.jsxs)(c.a.StrictMode,{children:[Object(z.jsx)(i.a,{}),Object(z.jsx)(we,{})]}),document.getElementById("root")),ye()}},[[663,1,2]]]);
//# sourceMappingURL=main.5b5dd973.chunk.js.map